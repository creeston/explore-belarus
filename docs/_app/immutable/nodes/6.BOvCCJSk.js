import{s as x,y as ee,a as z,z as O,g as M,i as C,A as te,f as _,k as W,e as y,t as le,c as j,b as D,d as ne,w as V,h as k,j as ae,B as A,x as ie,C as se,D as re}from"../chunks/scheduler.CK6oJh7_.js";import{S as oe,i as fe,t as g,a as $,d as B,c as S,b as T,m as H,g as L,e as N,f as ce}from"../chunks/index.CbkqpZxN.js";import{e as G,v as de,t as ue}from"../chunks/user-store.CWAZLyhz.js";import{I as pe,P as he}from"../chunks/InfiniteScroll.CZjorn2C.js";import{M as Z}from"../chunks/map.YFkPhTmw.js";async function me(e){return await(await e.fetch("data/places.json",{method:"GET",headers:{"content-type":"application/json"}})).json()}const _e=async e=>({props:{places:await me(e)}}),De=Object.freeze(Object.defineProperty({__proto__:null,load:_e},Symbol.toStringTag,{value:"Module"}));function U(e,l,t){const r=e.slice();return r[13]=l[t],r[14]=l,r[15]=t,r}function F(e){let l,t=e[5]("visited.empty")+"",r;return{c(){l=y("div"),r=le(t),this.h()},l(a){l=j(a,"DIV",{class:!0});var f=D(l);r=ne(f,t),f.forEach(_),this.h()},h(){V(l,"class","text-center md:text-2xl max-sm:text-md mt-10 empty-title text-slate-600 svelte-jmehiv")},m(a,f){C(a,l,f),k(l,r)},p(a,f){f&32&&t!==(t=a[5]("visited.empty")+"")&&ae(r,t)},d(a){a&&_(l)}}}function J(e){let l,t,r,a,f,o,i,s,c,b,v,P,p=e[2]>0&&K(e);a=new Z({props:{height:500,width:500,highlighedCoordIndex:e[4].findIndex(Y),coords:e[6].map(be)}});let I=G(e[1]),d=[];for(let n=0;n<I.length;n+=1)d[n]=Q(U(e,I,n));const h=n=>$(d[n],1,1,()=>{d[n]=null});return v=new pe({props:{threshold:100,window:!0}}),v.$on("loadMore",e[10]),{c(){p&&p.c(),l=z(),t=y("div"),r=y("div"),S(a.$$.fragment),f=z(),o=y("div"),i=z(),s=y("div"),c=y("ul");for(let n=0;n<d.length;n+=1)d[n].c();b=z(),S(v.$$.fragment),this.h()},l(n){p&&p.l(n),l=M(n),t=j(n,"DIV",{class:!0});var u=D(t);r=j(u,"DIV",{style:!0,class:!0});var w=D(r);T(a.$$.fragment,w),w.forEach(_),f=M(u),o=j(u,"DIV",{style:!0,class:!0}),D(o).forEach(_),i=M(u),s=j(u,"DIV",{});var m=D(s);c=j(m,"UL",{class:!0});var E=D(c);for(let q=0;q<d.length;q+=1)d[q].l(E);b=M(E),T(v.$$.fragment,E),E.forEach(_),m.forEach(_),u.forEach(_),this.h()},h(){A(r,"left","50px"),A(r,"top","25%"),V(r,"class","hidden md:fixed md:block"),A(o,"width","500px"),V(o,"class","hidden md:block"),V(c,"class","flex flex-wrap justify-center svelte-jmehiv"),V(t,"class","flex max-md:justify-center")},m(n,u){p&&p.m(n,u),C(n,l,u),C(n,t,u),k(t,r),H(a,r,null),k(t,f),k(t,o),k(t,i),k(t,s),k(s,c);for(let w=0;w<d.length;w+=1)d[w]&&d[w].m(c,null);k(c,b),H(v,c,null),P=!0},p(n,u){n[2]>0?p?(p.p(n,u),u&4&&g(p,1)):(p=K(n),p.c(),g(p,1),p.m(l.parentNode,l)):p&&(L(),$(p,1,1,()=>{p=null}),B());const w={};if(u&16&&(w.highlighedCoordIndex=n[4].findIndex(Y)),a.$set(w),u&18){I=G(n[1]);let m;for(m=0;m<I.length;m+=1){const E=U(n,I,m);d[m]?(d[m].p(E,u),g(d[m],1)):(d[m]=Q(E),d[m].c(),g(d[m],1),d[m].m(c,b))}for(L(),m=I.length;m<d.length;m+=1)h(m);B()}},i(n){if(!P){g(p),g(a.$$.fragment,n);for(let u=0;u<I.length;u+=1)g(d[u]);g(v.$$.fragment,n),P=!0}},o(n){$(p),$(a.$$.fragment,n),d=d.filter(Boolean);for(let u=0;u<d.length;u+=1)$(d[u]);$(v.$$.fragment,n),P=!1},d(n){n&&(_(l),_(t)),p&&p.d(n),N(a),ie(d,n),N(v)}}}function K(e){let l,t,r;return t=new Z({props:{height:e[2]-50,width:e[2]-50,highlighedCoordIndex:e[4].findIndex(X),coords:e[6].map(ve)}}),{c(){l=y("div"),S(t.$$.fragment),this.h()},l(a){l=j(a,"DIV",{class:!0});var f=D(l);T(t.$$.fragment,f),f.forEach(_),this.h()},h(){V(l,"class","hidden max-md:flex justify-center w-full")},m(a,f){C(a,l,f),H(t,l,null),r=!0},p(a,f){const o={};f&4&&(o.height=a[2]-50),f&4&&(o.width=a[2]-50),f&16&&(o.highlighedCoordIndex=a[4].findIndex(X)),t.$set(o)},i(a){r||(g(t.$$.fragment,a),r=!0)},o(a){$(t.$$.fragment,a),r=!1},d(a){a&&_(l),N(t)}}}function Q(e){let l,t,r,a;function f(i){e[9](i,e[15])}let o={place:e[13].place};return e[4][e[15]]!==void 0&&(o.hovered=e[4][e[15]]),t=new he({props:o}),se.push(()=>ce(t,"hovered",f)),{c(){l=y("li"),S(t.$$.fragment)},l(i){l=j(i,"LI",{});var s=D(l);T(t.$$.fragment,s),s.forEach(_)},m(i,s){C(i,l,s),H(t,l,null),a=!0},p(i,s){e=i;const c={};s&2&&(c.place=e[13].place),!r&&s&16&&(r=!0,c.hovered=e[4][e[15]],re(()=>r=!1)),t.$set(c)},i(i){a||(g(t.$$.fragment,i),a=!0)},o(i){$(t.$$.fragment,i),a=!1},d(i){i&&_(l),N(t)}}}function ge(e){let l,t,r,a,f;ee(e[8]);let o=e[1].length===0&&F(e),i=e[1].length>0&&J(e);return{c(){o&&o.c(),l=z(),i&&i.c(),t=O()},l(s){o&&o.l(s),l=M(s),i&&i.l(s),t=O()},m(s,c){o&&o.m(s,c),C(s,l,c),i&&i.m(s,c),C(s,t,c),r=!0,a||(f=te(window,"resize",e[8]),a=!0)},p(s,[c]){s[1].length===0?o?o.p(s,c):(o=F(s),o.c(),o.m(l.parentNode,l)):o&&(o.d(1),o=null),s[1].length>0?i?(i.p(s,c),c&2&&g(i,1)):(i=J(s),i.c(),g(i,1),i.m(t.parentNode,t)):i&&(L(),$(i,1,1,()=>{i=null}),B())},i(s){r||(g(i),r=!0)},o(s){$(i),r=!1},d(s){s&&(_(l),_(t)),o&&o.d(s),i&&i.d(s),a=!1,f()}}}let R=20;const X=e=>e,ve=e=>e.place.coordinates,Y=e=>e,be=e=>e.place.coordinates;function we(e,l,t){let r,a;W(e,de,h=>t(11,r=h)),W(e,ue,h=>t(5,a=h));let{data:f}=l,o=0,i=0;const s=f.props.places.map(h=>{const n=r.find(u=>u.placeId===h.id);return n?{place:h,date:new Date(n.date)}:null}).filter(h=>h).sort((h,n)=>n.date.getTime()-h.date.getTime()),c=Array(s.length).fill(!1);let b=0,v=[],P=[...s];function p(){t(2,o=window.innerWidth),t(3,i=window.innerHeight)}function I(h,n){e.$$.not_equal(c[n],h)&&(c[n]=h,t(4,c))}const d=()=>t(0,b++,b);return e.$$set=h=>{"data"in h&&t(7,f=h.data)},e.$$.update=()=>{e.$$.dirty&3&&t(1,v=[...v,...P.splice(R*b,R*(b+1)-1)])},[b,v,o,i,c,a,s,f,p,I,d]}class Ee extends oe{constructor(l){super(),fe(this,l,we,ge,x,{data:7})}}export{Ee as component,De as universal};
